<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accessible To-Do List</title>
  <style>
    :root{
      --bg:#f5f5f5; --card:#ffffff; --accent:#1565c0;
      --ok:#006400; /* dark green */
      --bad:#8b0000; /* dark red */
      --text:#222;
      --focus: #ffbf47;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:20px; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg); color:var(--text);
    }

    header {text-align:center; margin-bottom:12px;}
    h1 {margin:6px 0; font-size:1.6rem; text-shadow: 0 1px 0 rgba(0,0,0,0.03);}

    .container{
      max-width:720px; margin:0 auto;
    }

    .card{
      background:var(--card); padding:18px; border-radius:10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06); margin-bottom:16px;
    }

    /* datetime */
    #datetime { font-weight:600; color:#444; }

    /* visually hidden for accessibility-only text */
    .visually-hidden{
      position:absolute !important;
      height:1px; width:1px; overflow:hidden;
      clip:rect(1px, 1px, 1px, 1px); white-space:nowrap;
    }

    /* form */
    form{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    label{ font-weight:600; }
    input[type="text"]{
      flex:1; min-width:180px; padding:10px; border-radius:6px;
      border:1px solid #cfcfcf; font-size:1rem;
    }

    button{
      padding:9px 12px; border-radius:6px; border:none; cursor:pointer;
      background:var(--accent); color:#fff; font-weight:600;
    }
    button:focus, input:focus { outline:3px solid var(--focus); outline-offset:3px; }

    /* task list */
    ul#taskList{ list-style:none; padding:0; margin:12px 0 0 0; max-height:400px; overflow:auto; }
    li.task{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:10px; margin-bottom:8px; border-radius:8px;
      background:#fafafa; box-shadow:0 2px 6px rgba(0,0,0,0.04);
    }
    .task-left{ display:flex; align-items:center; gap:8px; flex:1; min-width:0; }
    .task-left label{ cursor:pointer; user-select:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .task-left input[type="checkbox"]{ transform:scale(1.15); }

    label.completed{ color:var(--ok); text-decoration:line-through; }
    label.pending{ color:var(--bad); }

    .delete-btn{
      background:#c62828; border-radius:6px; padding:8px 10px; color:white; border:none; cursor:pointer;
      flex-shrink:0;
    }
    .delete-btn:hover{ transform:translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.08); }

    /* filters */
    .filters{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
    .filters button[aria-pressed="true"]{ box-shadow: inset 0 -3px 0 rgba(0,0,0,0.08); transform:translateY(-1px); }

    /* responsive */
    @media (max-width:520px){
      form{ flex-direction:column; align-items:stretch; }
      .delete-btn{ padding:8px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>To-Do List</h1>
    <!-- live region for date/time -->
    <div id="datetime" aria-live="polite" aria-atomic="true"></div>
  </header>

  <main class="container" id="main">
    <section class="card" aria-labelledby="todoHeading">
      <h2 id="todoHeading" style="margin-top:0;font-size:1.1rem">Manage your tasks</h2>

      <!-- form with label -->
      <form id="taskForm" aria-label="Add new task">
        <label for="taskInput" class="visually-hidden">New task</label>
        <input id="taskInput" type="text" placeholder="Enter a new task" aria-required="true" />
        <button type="submit" id="addBtn">Add Task</button>
      </form>

      <!-- filters toolbar -->
      <div class="filters" role="toolbar" aria-label="Filter tasks">
        <button type="button" data-filter="all" aria-pressed="true">All</button>
        <button type="button" data-filter="completed" aria-pressed="false">Completed</button>
        <button type="button" data-filter="pending" aria-pressed="false">Pending</button>
      </div>
    </section>

    <!-- tasks list (aria-live so screen readers notice changes) -->
    <section class="card" aria-labelledby="listHeading">
      <h3 id="listHeading" class="visually-hidden">Task list</h3>
      <ul id="taskList" aria-live="polite" aria-atomic="true"></ul>
      <p id="summary" class="visually-hidden" aria-live="polite"></p>
    </section>
  </main>

  <script>
    /* Data model: array of task objects */
    // each task: { id: number, text: string, completed: boolean }
    let tasks = [];               // uses array methods (push, filter, map below)
    let currentFilter = 'all';

    // DOM refs
    const dtEl = document.getElementById('datetime');
    const form = document.getElementById('taskForm');
    const input = document.getElementById('taskInput');
    const taskList = document.getElementById('taskList');
    const filterButtons = document.querySelectorAll('[data-filter]');
    const summary = document.getElementById('summary');

    // Date/time live update
    function updateDateTime(){
      const now = new Date();
      dtEl.textContent = now.toLocaleString();
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);

    // Add task (from form submit)
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const text = input.value.trim();
      if(!text){
        // accessible feedback: move focus back and announce
        input.focus();
        return;
      }
      const task = { id: Date.now(), text, completed: false }; // object used to store a task
      tasks.push(task); // push()
      input.value = '';
      renderTasks();
      input.focus();
    });

    // Filter buttons
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        currentFilter = btn.dataset.filter;
        filterButtons.forEach(b => b.setAttribute('aria-pressed', b === btn ? 'true' : 'false'));
        renderTasks();
      });
    });

    // Toggle task completed by id
    function toggleTask(id){
      tasks = tasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t); // map()
      renderTasks();
    }

    // Delete task by id
    function deleteTask(id){
      tasks = tasks.filter(t => t.id !== id); // filter()
      renderTasks();
    }

    // Render tasks respecting currentFilter
    function renderTasks(){
      // choose filtered list
      let filtered = tasks;
      if(currentFilter === 'completed') filtered = tasks.filter(t => t.completed);
      if(currentFilter === 'pending') filtered = tasks.filter(t => !t.completed);

      // clear
      taskList.innerHTML = '';

      if(filtered.length === 0){
        const empty = document.createElement('p');
        empty.textContent = 'No tasks to show.';
        taskList.appendChild(empty);
      } else {
        filtered.forEach(task => {
          const li = document.createElement('li');
          li.className = 'task';
          li.setAttribute('data-id', task.id);

          // left: checkbox + label
          const left = document.createElement('div');
          left.className = 'task-left';

          const chk = document.createElement('input');
          chk.type = 'checkbox';
          const chkId = `chk-${task.id}`;
          chk.id = chkId;
          chk.checked = task.completed;
          chk.addEventListener('change', () => toggleTask(task.id));
          chk.setAttribute('aria-label', task.text + (task.completed ? ' (completed)' : ''));

          const lab = document.createElement('label');
          lab.htmlFor = chkId;
          lab.textContent = task.text;
          lab.className = task.completed ? 'completed' : 'pending';

          left.appendChild(chk);
          left.appendChild(lab);

          // right: delete button
          const del = document.createElement('button');
          del.type = 'button';
          del.className = 'delete-btn';
          del.textContent = 'Delete';
          del.setAttribute('aria-label', `Delete task "${task.text}"`);
          del.addEventListener('click', () => deleteTask(task.id));

          li.appendChild(left);
          li.appendChild(del);

          taskList.appendChild(li);
        });
      }

      // update an offscreen summary for screen readers
      const total = tasks.length;
      const done = tasks.filter(t => t.completed).length;
      summary.textContent = `Total ${total} tasks, ${done} completed. Showing ${filtered.length} tasks (${
